<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Incident Intelligence | SmartClaim.Pro</title>

<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800;900&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
<style>
body {
  font-family: 'Plus Jakarta Sans', sans-serif;
  background: radial-gradient(1200px 600px at 15% -10%, #0ea5e9, #020617 55%);
  color: #f8fafc;
  min-height: 100vh;
  overflow-x: hidden;
}

.glass {
  background: rgba(255,255,255,0.04);
  backdrop-filter: blur(30px) saturate(180%);
  border: 1px solid rgba(255,255,255,0.08);
  box-shadow: 0 20px 60px -10px rgba(0,0,0,0.5);
}

input, select, textarea {
  background: rgba(0,0,0,0.3) !important;
  border: 1px solid rgba(255,255,255,0.1) !important;
  color: white !important;
}

.step-pill {
  padding: 0.5rem 1.5rem;
  border-radius: 9999px;
  font-size: 0.75rem;
  font-weight: 800;
  background: rgba(255,255,255,0.05);
  color: #4b5563;
  text-transform: uppercase;
}

.step-pill.active { background: #38bdf8; color: white; }

.inline-ai-hint { font-size: 10px; color: #a5b4fc; margin-top: 0.25rem; }

button.primary {
  background: linear-gradient(90deg,#38bdf8,#0ea5e9);
  color: black;
  font-weight: 900;
  padding: 1rem 2rem;
  border-radius: 24px;
  width: 100%;
  text-transform: uppercase;
  letter-spacing: 0.2em;
  box-shadow: 0 15px 40px rgba(56,189,248,0.35);
  transition: all 0.3s ease;
}

/* RED MIC BUTTON */
#voice-trigger {
  position: fixed;
  bottom: 30px;
  right: 30px;
  background: #ef4444;
  color: white;
  width: 60px;
  height: 60px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow: 0 4px 15px rgba(239, 68, 68, 0.4);
  z-index: 1000;
  transition: all 0.3s;
}

#voice-trigger.listening { animation: pulse-red 1.5s infinite; transform: scale(1.1); }
@keyframes pulse-red {
  0% { box-shadow: 0 0 0 0px rgba(239, 68, 68, 0.7); }
  100% { box-shadow: 0 0 0 15px rgba(239, 68, 68, 0); }
}

.hidden-panel { display: none; }
</style>
</head>
<body>

<div id="voice-trigger" title="Voice Input">
  <span id="mic-icon" style="font-size: 24px;">ðŸŽ¤</span>
</div>

<nav class="sticky top-0 z-50 bg-black/40 backdrop-blur-xl border-b border-white/10">
  <div class="max-w-7xl mx-auto px-6 h-14 flex items-center justify-between">
    <div class="font-extrabold text-xl">SmartClaim<span class="text-sky-400">.Pro</span></div>
    <div class="hidden md:flex gap-8 text-sm font-bold text-gray-300">
      <a href="index.html">Home</a>
      <a href="submit-claim.html" class="text-white">File Claim</a>
      <a href="history.html">History</a>
    </div>
  </div>
</nav>

<header class="max-w-6xl mx-auto px-8 pt-16 pb-14 text-center">
  <h1 class="text-5xl font-extrabold leading-tight">
    On-the-Spot Claim <span class="text-sky-400 italic">Filing</span>
  </h1>
</header>

<main class="max-w-6xl mx-auto px-8">
  <div class="glass rounded-[36px] p-10 space-y-10">
    <h2 class="text-3xl font-extrabold">Incident Intelligence Input</h2>

    <div class="grid md:grid-cols-2 gap-6">
      <div>
        <label class="text-[11px] font-bold text-gray-400 uppercase">Vehicle Type</label>
        <select id="vehicleSelect" class="w-full p-4 rounded-2xl mt-2">
          <option>Car</option>
          <option>Bike</option>
        </select>
      </div>
      <div>
        <label class="text-[11px] font-bold text-gray-400 uppercase">Registration Number</label>
        <input id="regInput" type="text" class="w-full p-4 rounded-2xl mt-2" placeholder="MH-12-AB-1234">
      </div>
    </div>

    <div class="grid md:grid-cols-2 gap-6">
      <div>
        <label class="text-[11px] font-bold text-gray-400 uppercase">Driver is Policy Owner?</label>
        <select id="policyOwnerSelect" class="w-full p-4 rounded-2xl mt-2" onchange="toggleDriverPanel()">
          <option value="yes">Yes</option>
          <option value="no">No</option>
        </select>
        <div class="inline-ai-hint">Ownership mismatch triggers yellow review</div>
      </div>
      <div>
        <label class="text-[11px] font-bold text-gray-400 uppercase">Driver Name</label>
        <input id="driverNameInput" type="text" class="w-full p-4 rounded-2xl mt-2" placeholder="Full Name">
      </div>
    </div>

    <div id="relatedDriverPanel" class="hidden-panel space-y-4 bg-white/5 p-6 rounded-2xl border border-white/10">
      <label class="text-[11px] font-bold text-sky-400 uppercase">Relation to Policy Owner</label>
      <select class="w-full p-3 rounded-xl">
        <option>Spouse</option>
        <option>Child (Above 18)</option>
        <option>Parent</option>
        <option>Friend / Third Party</option>
      </select>
    </div>

    <div>
      <label class="text-[11px] font-bold text-gray-400 uppercase">Incident Location</label>
      <input id="locationInput" type="text" class="w-full p-4 rounded-2xl mt-2" placeholder="Enter Location">
    </div>

    <div class="grid md:grid-cols-2 gap-6">
      <div>
        <label class="text-[11px] font-bold text-gray-400 uppercase">Type of Incident</label>
        <select id="typeSelect" class="w-full p-4 rounded-2xl mt-2">
          <option>Road Accident</option>
          <option>Disaster</option>
          <option>Theft</option>
        </select>
      </div>
      <div>
        <label class="text-[11px] font-bold text-gray-400 uppercase">Incident Date</label>
        <input id="dateInput" type="date" class="w-full p-4 rounded-2xl mt-2">
      </div>
    </div>

    <div>
      <label class="text-[11px] font-bold text-gray-400 uppercase">Description</label>
      <textarea id="descriptionInput" class="w-full p-4 rounded-2xl mt-2 h-28 resize-none" placeholder="Describe incident... (Real-time voice enabled)"></textarea>
      <div id="voiceStatus" class="text-[10px] text-sky-400 mt-2 font-bold italic"></div>
    </div>

    <button class="primary mt-6" onclick="linkPages()">
      CONTINUE TO EVIDENCE VAULT
    </button>
  </div>
</main>

<script>
// LINKING LOGIC
function linkPages() {
  const data = {
    name: document.getElementById('driverNameInput').value || "User",
    date: document.getElementById('dateInput').value || "Jan 28, 2026",
    type: document.getElementById('typeSelect').value
  };
  localStorage.setItem('lastIncident', JSON.stringify(data));
  window.location.href='document.html';
}

function toggleDriverPanel() {
  const select = document.getElementById('policyOwnerSelect');
  const panel = document.getElementById('relatedDriverPanel');
  panel.style.display = (select.value === 'no') ? 'block' : 'none';
}

const micBtn = document.getElementById('voice-trigger');
const descriptionBox = document.getElementById('descriptionInput');
const voiceStatus = document.getElementById('voiceStatus');
const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

if (SpeechRecognition) {
  const recognition = new SpeechRecognition();
  recognition.continuous = true;
  recognition.interimResults = true;
  recognition.lang = 'en-US';
  let isListening = false;

  micBtn.addEventListener('click', () => {
    if (!isListening) {
      recognition.start();
      micBtn.classList.add('listening');
      voiceStatus.innerText = "Listening... Text will appear as you speak.";
      isListening = true;
    } else {
      recognition.stop();
      micBtn.classList.remove('listening');
      voiceStatus.innerText = "";
      isListening = false;
    }
  });

  recognition.onresult = (event) => {
    let interimTranscript = '';
    let finalTranscript = '';
    for (let i = event.resultIndex; i < event.results.length; ++i) {
      if (event.results[i].isFinal) { finalTranscript += event.results[i][0].transcript; } 
      else { interimTranscript += event.results[i][0].transcript; }
    }
    descriptionBox.value = finalTranscript + interimTranscript;
  };

  recognition.onerror = () => {
    micBtn.classList.remove('listening');
    isListening = false;
  };
} else {
  voiceStatus.innerText = "Voice recognition not supported in this browser.";
}
</script>
</body>
</html>